<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${title} ?: 'Danh Sách Sinh Viên'"></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { 
            background-color: #212529; /* Dark Background */
            color: #f8f9fa; /* Light Text */
        }
        .container {
            max-width: 1200px;
        }
        .table-custom {
            --bs-table-bg: #343a40; /* Darker Table Background */
            --bs-table-striped-bg: #495057;
            --bs-table-border-color: #495057;
        }
        .text-success-custom { color: #28a745 !important; }
        .text-warning-custom { color: #ffc107 !important; }
        .btn-custom-view {
            background-color: #007bff;
            border-color: #007bff;
            color: #fff;
        }
        .btn-custom-view:hover {
            background-color: #0056b3;
            border-color: #0056b3;
            color: #fff;
        }
    </style>
</head>
<body class="bg-dark">
<div class="container mt-4">
    <h2 class="text-center mb-4 text-warning-custom" th:text="${title} ?: 'Danh Sách Sinh Viên'"></h2>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <a th:href="@{/sinhvien/add}" class="btn btn-success">+ Thêm Sinh Viên</a>
        
        <form th:action="@{/sinhvien/search}" method="get" class="d-flex">
            <input type="text" name="mssv" class="form-control me-2 bg-dark text-white border-secondary" 
                   placeholder="Tìm kiếm theo MSSV..." required>
            <button class="btn btn-primary">Tìm kiếm</button>
        </form>
    </div>
    
    <div th:if="${message}" class="alert alert-success text-center" th:text="${message}"></div>
    <div th:if="${errorMessage}" class="alert alert-danger text-center" th:text="${errorMessage}"></div>


    <div th:if="${not #lists.isEmpty(sinhviens)}">
        <div class="table-responsive">
            <table class="table table-custom table-striped table-hover align-middle text-center">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th> 
                        <th>MSSV</th>
                        <th>Họ Tên</th>
                        <th>Lớp</th>
                        <th>Ngành Học</th>
                        <th>SĐT</th>
                        <th>Hành Động</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="sv : ${sinhviens}">
                        <td th:text="${sv.id}"></td> <td th:text="${sv.mssv}"></td>
                        <td th:text="${sv.hoTen}"></td>
                        <td th:text="${sv.lop}"></td>
                        <td th:text="${sv.nganhHoc}"></td>
                        <td th:text="${sv.soDienThoai}"></td>
                        <td>
                            <a th:href="@{'/sinhvien/detail/' + ${sv.id}}" class="btn btn-sm btn-custom-view me-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-lines-fill" viewBox="0 0 16 16">
                                    <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm11.5-6a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h1.5V9.5a.5.5 0 0 1 .5-.5zm0 3a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1a.5.5 0 0 1 .5-.5z"/>
                                </svg>
                                Chi Tiết
                            </a>
                            
                            <a th:href="@{'/sinhvien/edit/' + ${sv.id}}" class="btn btn-sm btn-warning me-2">Sửa</a>
                            
                            <a th:href="@{'/sinhvien/delete/' + ${sv.id}}" 
                               class="btn btn-sm btn-danger"
                               onclick="return confirm('Bạn có chắc muốn xóa sinh viên này?')">Xóa</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div th:unless="${not #lists.isEmpty(sinhviens)}" class="alert alert-info bg-secondary text-white">
        Không tìm thấy sinh viên nào trong danh sách.
    </div>
    
    <div class="text-center mt-4">
        <a th:href="@{/}" class="btn btn-secondary">Về trang chủ</a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>